{"ast":null,"code":"import UserHeaderVue from '@/components/UserHeader.vue';\nimport Filters from './Filters.vue';\nimport TheaterHome from './TheaterHome.vue';\nimport axios from 'axios';\nimport refreshAccessToken from '@/utils/refreshToken';\nexport default {\n  name: 'UserHome',\n  data() {\n    return {\n      theater_movies: {},\n      display: false\n    };\n  },\n  components: {\n    'user-header': UserHeaderVue,\n    'filters': Filters,\n    'theater-view': TheaterHome\n  },\n  created() {\n    this.allHomeTheaterMovies();\n  },\n  methods: {\n    async allHomeTheaterMovies() {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const theatersResponse = await axios.get('http://127.0.0.1:8081/api/movies_at_theater/home');\n        this.theater_movies = theatersResponse.data;\n        if (this.theater_movies.length > 0) {\n          console.log(\"Theaters data fetched\");\n          this.display = true;\n        } else {\n          console.log(\"No theater ceated\");\n          this.display = false;\n        }\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.allHomeTheaterMovies();\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while fetching the theater data.');\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["UserHeaderVue","Filters","TheaterHome","axios","refreshAccessToken","name","data","theater_movies","display","components","created","allHomeTheaterMovies","methods","access_token","localStorage","getItem","defaults","headers","common","theatersResponse","get","length","console","log","error","response","status","alert"],"sources":["src/views/user/home/Home.vue"],"sourcesContent":["<template>\n    <div>\n        <user-header></user-header>\n        <div class=\"container-fluid text-center\">\n            <div class=\"row\">\n                <div class=\"col-2\">\n                    <filters></filters>\n                </div>\n                <div class=\"col-10\">\n                    <div class=\"container text-center\" v-show=\"display\">\n                        <div class=\"row\" id=\"display_row\">\n                            <div class=\"col center-block\" v-for=\"theater_movie in theater_movies\"  :key=\"theater_movie.theater_id\">\n                                <theater-view style=\"margin-bottom: 20px;\" :theater = \"theater_movie\"></theater-view>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport UserHeaderVue from '@/components/UserHeader.vue';\nimport Filters from './Filters.vue';\nimport TheaterHome from './TheaterHome.vue';\n\nimport axios from 'axios';\nimport refreshAccessToken from '@/utils/refreshToken';\n\nexport default {\n    name: 'UserHome',\n    data(){\n        return{\n            theater_movies: {},\n            display: false\n        }\n    },\n    components: {\n        'user-header': UserHeaderVue,\n        'filters': Filters,\n        'theater-view': TheaterHome,\n    },\n    created(){\n        this.allHomeTheaterMovies()\n    },\n    methods:{\n        async allHomeTheaterMovies() {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                const theatersResponse = await axios.get('http://127.0.0.1:8081/api/movies_at_theater/home')\n\n                this.theater_movies = theatersResponse.data\n                if (this.theater_movies.length > 0) {\n                    console.log(\"Theaters data fetched\")\n                    this.display = true\n                }\n                else {\n                    console.log(\"No theater ceated\")\n                    this.display = false\n                }\n            }\n            catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.allHomeTheaterMovies()\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while fetching the theater data.')\n                }\n            }\n        },\n    }\n}\n\n</script>\n\n<style scoped>\n.col-2 {\n    margin: 0;\n    padding: 0;\n}\n\n\n.view_p {\n    margin-bottom: 0px;\n    margin-top: 10px;\n    font-weight: 100;\n    font-size: 10px\n}\n\nbutton {\n    margin-top: 0px;\n    color: rgb(202, 209, 235);\n    border: none;\n    font-size: 15px;\n}\n\nbutton:hover {\n    background-color: rgb(159, 182, 242);\n}\n\n#space {\n    height: 50px;\n}\n\n#display_row {\n    margin: 50px 30px 10px 30px;\n}\n</style>"],"mappings":"AAwBA,OAAAA,aAAA;AACA,OAAAC,OAAA;AACA,OAAAC,WAAA;AAEA,OAAAC,KAAA;AACA,OAAAC,kBAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,cAAA;MACAC,OAAA;IACA;EACA;EACAC,UAAA;IACA,eAAAT,aAAA;IACA,WAAAC,OAAA;IACA,gBAAAC;EACA;EACAQ,QAAA;IACA,KAAAC,oBAAA;EACA;EACAC,OAAA;IACA,MAAAD,qBAAA;MACA;QACA,IAAAE,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAZ,KAAA,CAAAa,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QACA,MAAAM,gBAAA,SAAAhB,KAAA,CAAAiB,GAAA;QAEA,KAAAb,cAAA,GAAAY,gBAAA,CAAAb,IAAA;QACA,SAAAC,cAAA,CAAAc,MAAA;UACAC,OAAA,CAAAC,GAAA;UACA,KAAAf,OAAA;QACA,OACA;UACAc,OAAA,CAAAC,GAAA;UACA,KAAAf,OAAA;QACA;MACA,EACA,OAAAgB,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAAtB,kBAAA;UACA,WAAAO,oBAAA;QACA,OAEA,IAAAa,KAAA,CAAAC,QAAA;UACAH,OAAA,CAAAE,KAAA,CAAAA,KAAA;UACAG,KAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}