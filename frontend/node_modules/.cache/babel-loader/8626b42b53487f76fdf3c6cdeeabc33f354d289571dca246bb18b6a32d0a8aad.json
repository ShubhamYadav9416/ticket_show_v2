{"ast":null,"code":"import UserHeader from '@/components/UserHeader.vue';\nimport axios from 'axios';\nimport refreshAccessToken from '../../../utils/refreshToken';\nexport default {\n  name: 'MovieBooking',\n  data() {\n    return {\n      theater_movie_id: this.$route.params.id,\n      no_of_tickets: \"\",\n      movie_data: [],\n      price: \"\",\n      cost_per_ticket: \"\"\n    };\n  },\n  created() {\n    this.movieDataBooking();\n  },\n  methods: {\n    minus() {\n      if (this.no_of_tickets === 0) {\n        this.no_of_tickets = 0;\n        this.price = \"\";\n      } else {\n        this.no_of_tickets = this.no_of_tickets - 1;\n        this.price = this.no_of_tickets * this.cost_per_ticket;\n      }\n    },\n    plus() {\n      if (!this.no_of_tickets) {\n        this.no_of_tickets = 1;\n        this.price = this.no_of_tickets * this.cost_per_ticket;\n      } else {\n        this.no_of_tickets = this.no_of_tickets + 1;\n        this.price = this.no_of_tickets * this.cost_per_ticket;\n      }\n    },\n    async movieDataBooking() {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const theatersMoviebookingResponse = await axios.get(`http://127.0.0.1:8081/api/theater_movie/booking/${this.theater_movie_id}`);\n        this.movie_data = theatersMoviebookingResponse.data[0];\n        this.cost_per_ticket = this.movie_data.current_price;\n        console.log(this.cost_per_ticket);\n        // if (theatersRatingResponse.data.staus === \"not_rated\") {\n        //     this.show_rate_form = true\n        // }\n        // else {\n        //     this.user_rating = theatersRatingResponse.data.rating\n        //     this.show_rate_form = false\n        // }\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.movieDataBooking();\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while fetching the movie data.');\n        }\n      }\n    }\n  },\n  components: {\n    'user-header': UserHeader\n  }\n};","map":{"version":3,"names":["UserHeader","axios","refreshAccessToken","name","data","theater_movie_id","$route","params","id","no_of_tickets","movie_data","price","cost_per_ticket","created","movieDataBooking","methods","minus","plus","access_token","localStorage","getItem","defaults","headers","common","theatersMoviebookingResponse","get","current_price","console","log","error","response","status","alert","components"],"sources":["src/views/user/ticket_booking/MovieBooking.vue"],"sourcesContent":["<template>\n    <div>\n        <user-header></user-header>\n        <div class=\"container text-center\">\n            <div class=\"row\" id=\"outer\">\n                <div class=\"col-2\">\n\n                </div>\n                <div class=\"col\">\n                    <div class=\"container text-center\">\n                        <div class=\"row\" style=\"padding: 10px;\" id=\"inner\">\n                            <div class=\"col-7\" align=\"left\">\n                                <h5>{{ movie_data.movie_name }}</h5>\n                                <p style=\"font-size: small; color: rgb(71, 69, 69);\">{{ movie_data.movie_tag }} | {{\n                                    movie_data.movie_language }} | {{ movie_data.movie_duration }}</p>\n                                <p style=\"font-weight: 300;\">{{ movie_data.movie_description }}</p>\n                                <p class=\"location\"><i class=\"bi bi-geo-alt-fill\" style=\"color:green\"></i>{{\n                                    movie_data.theater_place }} , {{ movie_data.theater_location }}\n                                </p>\n                                <span style=\"font-size: small;\">Per Ticket Rs<i style=\"font-size: medium;\">{{\n                                    movie_data.current_price }}<i class=\"bi bi-arrow-down-right\" style=\"color:green; font-weight:600;\"></i> </i></span>\n                                <div class=\"d-flex align-items-end\">\n                                    <button class=\"minus_button\" @click=\"minus()\">-</button>\n                                    <input style=\"width: 50px; height: 40px;\" v-model=\"no_of_tickets\">\n                                    <button class=\"plus_button\" @click=\"plus()\">+</button>\n                                    <p v-show=\"price\">Pay Rs {{ price }}.00</p>\n                                    <button type=\"button\" class=\"btn btn-success\" style=\"margin-left: 20px;\"\n                                        v-show=\"no_of_tickets > 0\">Book</button>\n                                </div>\n                                <span style=\"font-size: small;\">Hurry up!! only <i style=\"font-size: medium;\">{{\n                                    movie_data.seat_left }}</i>\n                                    left.</span>\n                            </div>\n                            <div class=\"col-1\"></div>\n                            <div class=\"col-4\">\n                                <img src=\"../../../assets/ant-man-and-the-wasp-quantumania.avif\"\n                                    class=\"rounded mx-auto d-block\" alt=\"...\" style=\"max-height: 350px; max-width: 175px;\">\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-2 d-flex align-items-start\">\n                    <router-link to=\"/home\">\n                        <button type=\"button\" class=\"btn-close\" aria-label=\"Close\"\n                            style=\"margin-left: -20px;margin-top: -10px;\"></button>\n                    </router-link>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport UserHeader from '@/components/UserHeader.vue';\nimport axios from 'axios';\n\nimport refreshAccessToken from '../../../utils/refreshToken'\n\n\n\nexport default {\n    name: 'MovieBooking',\n    data() {\n        return {\n            theater_movie_id: this.$route.params.id,\n            no_of_tickets: \"\",\n            movie_data: [],\n            price: \"\",\n            cost_per_ticket: \"\",\n        }\n    },\n    created() {\n        this.movieDataBooking()\n    },\n    methods: {\n        minus() {\n            if (this.no_of_tickets === 0) {\n                this.no_of_tickets = 0\n                this.price = \"\"\n            }\n            else {\n                this.no_of_tickets = this.no_of_tickets - 1\n                this.price = this.no_of_tickets * this.cost_per_ticket\n            }\n        },\n        plus() {\n            if (!this.no_of_tickets) {\n                this.no_of_tickets = 1\n                this.price = this.no_of_tickets * this.cost_per_ticket\n            }\n            else {\n                this.no_of_tickets = this.no_of_tickets + 1\n                this.price = this.no_of_tickets * this.cost_per_ticket\n            }\n        },\n        async movieDataBooking() {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                const theatersMoviebookingResponse = await axios.get(`http://127.0.0.1:8081/api/theater_movie/booking/${this.theater_movie_id}`)\n                this.movie_data = theatersMoviebookingResponse.data[0]\n                this.cost_per_ticket = this.movie_data.current_price\n                console.log(this.cost_per_ticket)\n                // if (theatersRatingResponse.data.staus === \"not_rated\") {\n                //     this.show_rate_form = true\n                // }\n                // else {\n                //     this.user_rating = theatersRatingResponse.data.rating\n                //     this.show_rate_form = false\n                // }\n            }\n            catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.movieDataBooking()\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while fetching the movie data.')\n                }\n            }\n        }\n    },\n    components: {\n        'user-header': UserHeader,\n    },\n\n}\n\n\n</script>\n\n\n<style scoped>\n#outer {\n    margin-top: 90px;\n}\n\n#inner {\n    border: 1px solid rgb(86, 85, 87);\n    border-radius: 5px;\n}\n\n\n\n.minus_button {\n    width: 50px;\n    height: 40px;\n    border-radius: 10px 0px 0 10px;\n    font-size: 20px;\n    font-weight: bolder;\n    background-color: brown;\n}\n\n.plus_button {\n    width: 50px;\n    height: 40px;\n    padding: 0;\n    border-radius: 0px 10px 10px 0px;\n    font-size: 20px;\n    font-weight: bolder;\n    background-color: darkgreen;\n\n}</style>"],"mappings":"AAsDA,OAAAA,UAAA;AACA,OAAAC,KAAA;AAEA,OAAAC,kBAAA;AAIA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,gBAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;MACAC,aAAA;MACAC,UAAA;MACAC,KAAA;MACAC,eAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,gBAAA;EACA;EACAC,OAAA;IACAC,MAAA;MACA,SAAAP,aAAA;QACA,KAAAA,aAAA;QACA,KAAAE,KAAA;MACA,OACA;QACA,KAAAF,aAAA,QAAAA,aAAA;QACA,KAAAE,KAAA,QAAAF,aAAA,QAAAG,eAAA;MACA;IACA;IACAK,KAAA;MACA,UAAAR,aAAA;QACA,KAAAA,aAAA;QACA,KAAAE,KAAA,QAAAF,aAAA,QAAAG,eAAA;MACA,OACA;QACA,KAAAH,aAAA,QAAAA,aAAA;QACA,KAAAE,KAAA,QAAAF,aAAA,QAAAG,eAAA;MACA;IACA;IACA,MAAAE,iBAAA;MACA;QACA,IAAAI,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAnB,KAAA,CAAAoB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QACA,MAAAM,4BAAA,SAAAvB,KAAA,CAAAwB,GAAA,yDAAApB,gBAAA;QACA,KAAAK,UAAA,GAAAc,4BAAA,CAAApB,IAAA;QACA,KAAAQ,eAAA,QAAAF,UAAA,CAAAgB,aAAA;QACAC,OAAA,CAAAC,GAAA,MAAAhB,eAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA,EACA,OAAAiB,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAA7B,kBAAA;UACA,WAAAY,gBAAA;QACA,OAEA,IAAAe,KAAA,CAAAC,QAAA;UACAH,OAAA,CAAAE,KAAA,CAAAA,KAAA;UACAG,KAAA;QACA;MACA;IACA;EACA;EACAC,UAAA;IACA,eAAAjC;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}