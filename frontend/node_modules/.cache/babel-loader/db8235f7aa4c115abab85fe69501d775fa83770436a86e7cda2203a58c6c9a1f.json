{"ast":null,"code":"import axios from 'axios';\nimport refreshAccessToken from '../../../utils/refreshToken';\nexport default {\n  name: 'LinkTheaterMovie',\n  data() {\n    return {\n      movies: {}\n    };\n  },\n  created() {\n    this.allMovies();\n  },\n  methods: {\n    async allMovies() {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const moviesResponse = await axios.get('http://127.0.0.1:8081/api/movie');\n        this.movies = moviesResponse.data;\n        console.log(this.movies);\n        if (this.movies.length > 0) {\n          console.log(\"Movie data fletch\");\n        } else {\n          console.log(\"No movie ceated\");\n        }\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.allMovies();\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while fetching the movie data.');\n        }\n      }\n    },\n    async allTheaters() {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const theatersResponse = await axios.get('http://127.0.0.1:8081/api/theater');\n        this.theaters = theatersResponse.data;\n        if (this.theaters.length > 0) {\n          console.log(\"Theater data fetched\");\n          this.no_table = false;\n          this.show_table = true;\n        } else {\n          console.log(\"No theater ceated\");\n          this.no_table = true;\n          this.show_table = false;\n        }\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.alltheaters();\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while fetching the theater data.');\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","refreshAccessToken","name","data","movies","created","allMovies","methods","access_token","localStorage","getItem","defaults","headers","common","moviesResponse","get","console","log","length","error","response","status","alert","allTheaters","theatersResponse","theaters","no_table","show_table","alltheaters"],"sources":["src/views/admin/theater_movie/LinkTheaterMovie.vue"],"sourcesContent":["<template>\n    <div id=\"outer_div\">\n        <admin-header></admin-header>\n        <div class=\"container text-center\">\n            <div class=\"row\">\n                <div class=\"col-4\">\n\n                </div>\n                <div class=\"col\">\n                    <br><br>\n                    <p>To add Movie at Theater<br> Fill this form</p>\n                    <form>\n                        <div class=\"mb-3\">\n                            <label class=\"form-label\">Select Theater</label>\n                            <select class=\"form-select\">\n                                <option selected disabled value=\"\">Choose Theater...</option>\n                                <option>PVR</option>\n                            </select>\n                        </div>\n\n                        <div class=\"mb-3\">\n                            <label class=\"form-label\">Select Movie</label>\n                            <select class=\"form-select\">\n                                <option selected disabled value=\"\">Choose Movie...</option>\n                                <option>Dhoom</option>\n                            </select>\n                        </div>\n\n                        <div class=\"mb-3\">\n                            <input type=\"number\" class=\"form-control\" v-model=\"theater_location\" required\n                                placeholder=\"Ticket Price\">\n                        </div>\n                        <div class=\"mb-3\">\n                            <input class=\"form-control\" type=\"datetime-local\" name=\"showtime\">\n                        </div>\n\n                        <button type=\"button\" class=\"btn btn-primary\" @click=\"addTheater()\">Add Theater</button>\n                    </form>\n                </div>\n                <div class=\"col-4\">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport axios from 'axios';\n\nimport refreshAccessToken from '../../../utils/refreshToken'\n\nexport default {\n    name: 'LinkTheaterMovie',\n    data() {\n        return {\n            movies: {},\n        }\n    },\n    created() {\n        this.allMovies()\n    },\n    methods: {\n        async allMovies() {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n\n                const moviesResponse = await axios.get('http://127.0.0.1:8081/api/movie')\n                this.movies = moviesResponse.data\n                console.log(this.movies)\n                if (this.movies.length > 0) {\n                    console.log(\"Movie data fletch\")\n                }\n                else {\n                    console.log(\"No movie ceated\")\n\n                }\n            } catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.allMovies()\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while fetching the movie data.')\n                }\n            }\n        },\n        async allTheaters() {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                const theatersResponse = await axios.get('http://127.0.0.1:8081/api/theater')\n\n                this.theaters = theatersResponse.data\n                if (this.theaters.length > 0) {\n                    console.log(\"Theater data fetched\")\n                    this.no_table = false\n                    this.show_table = true\n                }\n                else {\n                    console.log(\"No theater ceated\")\n                    this.no_table = true\n                    this.show_table = false\n                }\n            }\n            catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.alltheaters()\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while fetching the theater data.')\n                }\n            }\n        },\n    }\n}\n</script>"],"mappings":"AAiDA,OAAAA,KAAA;AAEA,OAAAC,kBAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,OAAA;IACA,MAAAD,UAAA;MACA;QACA,IAAAE,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAV,KAAA,CAAAW,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QAEA,MAAAM,cAAA,SAAAd,KAAA,CAAAe,GAAA;QACA,KAAAX,MAAA,GAAAU,cAAA,CAAAX,IAAA;QACAa,OAAA,CAAAC,GAAA,MAAAb,MAAA;QACA,SAAAA,MAAA,CAAAc,MAAA;UACAF,OAAA,CAAAC,GAAA;QACA,OACA;UACAD,OAAA,CAAAC,GAAA;QAEA;MACA,SAAAE,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAApB,kBAAA;UACA,WAAAK,SAAA;QACA,OAEA,IAAAa,KAAA,CAAAC,QAAA;UACAJ,OAAA,CAAAG,KAAA,CAAAA,KAAA;UACAG,KAAA;QACA;MACA;IACA;IACA,MAAAC,YAAA;MACA;QACA,IAAAf,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAV,KAAA,CAAAW,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QACA,MAAAgB,gBAAA,SAAAxB,KAAA,CAAAe,GAAA;QAEA,KAAAU,QAAA,GAAAD,gBAAA,CAAArB,IAAA;QACA,SAAAsB,QAAA,CAAAP,MAAA;UACAF,OAAA,CAAAC,GAAA;UACA,KAAAS,QAAA;UACA,KAAAC,UAAA;QACA,OACA;UACAX,OAAA,CAAAC,GAAA;UACA,KAAAS,QAAA;UACA,KAAAC,UAAA;QACA;MACA,EACA,OAAAR,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAApB,kBAAA;UACA,WAAA2B,WAAA;QACA,OAEA,IAAAT,KAAA,CAAAC,QAAA;UACAJ,OAAA,CAAAG,KAAA,CAAAA,KAAA;UACAG,KAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}