{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport AdminHeader from '../../../components/AdminHeader';\nimport refreshAccessToken from '../../../utils/refreshToken';\nexport default {\n  data() {\n    return {\n      movies: {},\n      show_table: false,\n      no_table: false,\n      posterUrl: \"\",\n      poster: \"\"\n    };\n  },\n  created() {\n    this.allMovies(), this.getMoviePoster();\n  },\n  methods: {\n    async allMovies() {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const moviesResponse = await axios.get('http://127.0.0.1:8081/api/movie');\n        this.movies = moviesResponse.data;\n        if (this.movies.length > 0) {\n          console.log(\"Movie data fletch\");\n          this.show_table = true;\n          try {\n            for (let movie of this.movies) {\n              let access_token = localStorage.getItem('access_token');\n              axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n              const moviesPosterResponse = await axios.get(`http://127.0.0.1:8081/api/movie/poster/${movie.movie_id}`);\n\n              // Decode the base64 data and create a temporary file with the image\n              const base64Data = moviesPosterResponse.data;\n              const posterUrl = `data:image/jpeg;base64,${base64Data}`;\n              movie.push({\n                'movie_poster_url': posterUrl\n              });\n              // console.log(movie)\n            }\n          } catch (error) {\n            console.log(\"hello\");\n            console.error(error);\n          }\n          console.log(this.movies);\n        } else {\n          console.log(\"No movie ceated\");\n          this.no_table = true;\n        }\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.allMovies();\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while fetching the movie data.');\n        }\n      }\n    },\n    async dltMovie(id) {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        await axios.delete(`http://127.0.0.1:8081/api/movie/${id}`);\n        console.log(\"Movie with id: \" + id + \" deleted\");\n        await this.allMovies();\n      } catch (error) {\n        console.error(error);\n        alert(\"An error occurred while deleting movie\");\n      }\n    },\n    async getMoviePoster() {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const moviesPosterResponse = await axios.get(`http://127.0.0.1:8081/api/movie/poster/1`);\n\n        // Decode the base64 data and create a temporary file with the image\n        const base64Data = moviesPosterResponse.data;\n        this.poster = base64Data;\n        this.posterUrl = `data:image/jpeg;base64,${base64Data}`;\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  },\n  components: {\n    'admin-header': AdminHeader\n  }\n};","map":{"version":3,"names":["axios","AdminHeader","refreshAccessToken","data","movies","show_table","no_table","posterUrl","poster","created","allMovies","getMoviePoster","methods","access_token","localStorage","getItem","defaults","headers","common","moviesResponse","get","length","console","log","movie","moviesPosterResponse","movie_id","base64Data","push","error","response","status","alert","dltMovie","id","delete","components"],"sources":["src/views/admin/movies/MovieView.vue"],"sourcesContent":["<template>\n    <div id=\"outer_div\">\n        <admin-header></admin-header>\n        <br><br>\n        <div class=\"container-fluid text-center\">\n            <div class=\"row\">\n                <div class=\"col-2\"></div>\n                <div class=\"col\" v-if=\"no_table\">\n                    <p><i>\"No Movie is created\"</i></p><br><br>\n                </div>\n                <div class=\"col\" v-if=\"show_table\">\n                    <center>\n\n                        <h5>Movies</h5>\n                        <table>\n                            <tr>\n                                <th>Movie Id</th>\n                                <th>Movie Name</th>\n                                <th>Movie Tag</th>\n                                <th>Movie Language</th>\n                                <th>Movie Duration</th>\n                                <th>Movie Description</th>\n                                <th>Movie Poster</th>\n                                <th>Actions</th>\n                            </tr>\n                            <tr v-for=\"movie in movies\" :key=\"movie.movie_id\">\n                                <td>{{ movie.movie_id }}</td>\n                                <td>{{ movie.movie_name }}</td>\n                                <td>{{ movie.movie_tag }}</td>\n                                <td>{{ movie.movie_language }}</td>\n                                <td>{{ movie.movie_duration }}</td>\n                                <td>{{ movie.movie_description.slice(0, 15) }} ...</td>\n                                <td>\n                                    <p>{{ movie.movie_image_path }}</p>\n                                </td>\n                                <!-- <td><img src=\"../../../../../backend/static/img/movies/ant-man-and-the-wasp-quantumania.avif\"></td> -->\n                                <!-- <td><img src=\"../../../assets/ant-man-and-the-wasp-quantumania.avif\"></td> -->\n                                <!-- <td><a :href=movie.movie_image_path>view</a></td> -->\n                                <!-- <td><img :src=\"movie.movie_image_path\"></td> -->\n                                <td><a @click=\"dltMovie(movie.movie_id)\"><i class=\"bi bi-trash-fill\"\n                                            style=\"color: brown;\"></i></a>/\n                                    <router-link :to=\"`/admin/movie/edit/${movie.movie_id}`\"><i class=\"bi bi-pencil-square\"\n                                            style=\"color: grey;\"></i></router-link>\n                                </td>\n                            </tr>\n                        </table>\n                    </center>\n                </div>\n                <div class=\"col-2\"></div>\n            </div>\n        </div><br><br>\n        <div class=\"container-fluid text-center\">\n            <div class=\"row\">\n                <div class=\"col-2\"></div>\n                <div class=\"col\">\n                    <div class=\"container text-center\">\n                        <div class=\"row\">\n                            <div class=\"col\">\n                                <h6>To Add New Movie</h6>\n                                <router-link to=\"/admin/add_movie\"><button>\n                                        <center>+</center>\n                                    </button></router-link>\n                            </div>\n                            <div class=\"col-2\"></div>\n                            <div class=\"col\">\n                                <h6>To Add New Movie in Theater</h6>\n                                <router-link to=\"/admin/LinkTheaterMovie\"><button>+</button></router-link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-2\">\n                    <img :src=\"posterUrl\" alt=\"Movie Poster\"> {{ poster }}\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n\n<script>\n\nimport axios from 'axios';\n\n\nimport AdminHeader from '../../../components/AdminHeader'\n\nimport refreshAccessToken from '../../../utils/refreshToken'\n\nexport default {\n    data() {\n        return {\n            movies: {},\n            show_table: false,\n            no_table: false,\n            posterUrl: \"\",\n            poster: \"\",\n        }\n    },\n    created() {\n        this.allMovies(),\n            this.getMoviePoster()\n    },\n    methods: {\n        async allMovies() {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n\n                const moviesResponse = await axios.get('http://127.0.0.1:8081/api/movie')\n                this.movies = moviesResponse.data\n                if (this.movies.length > 0) {\n                    console.log(\"Movie data fletch\")\n                    this.show_table = true\n                    try {\n\n                        for (let movie of this.movies){\n                            let access_token = localStorage.getItem('access_token')\n\n                            axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                            const moviesPosterResponse = await axios.get(`http://127.0.0.1:8081/api/movie/poster/${movie.movie_id}`)\n\n                            // Decode the base64 data and create a temporary file with the image\n                            const base64Data = moviesPosterResponse.data;\n                            const posterUrl = `data:image/jpeg;base64,${base64Data}`;\n                            movie.push({ 'movie_poster_url': posterUrl })\n                            // console.log(movie)\n                        }\n                    }\n                    catch (error) {\n                        console.log(\"hello\")\n                        console.error(error)\n                    }\n                    console.log(this.movies)\n                }\n                else {\n                    console.log(\"No movie ceated\")\n                    this.no_table = true\n                }\n            }\n            catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.allMovies()\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while fetching the movie data.')\n                }\n            }\n        },\n        async dltMovie(id) {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n\n                await axios.delete(`http://127.0.0.1:8081/api/movie/${id}`)\n                console.log(\"Movie with id: \" + id + \" deleted\")\n                await this.allMovies()\n            }\n            catch (error) {\n                console.error(error);\n                alert(\"An error occurred while deleting movie\");\n            }\n        },\n        async getMoviePoster() {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                const moviesPosterResponse = await axios.get(`http://127.0.0.1:8081/api/movie/poster/1`)\n\n                // Decode the base64 data and create a temporary file with the image\n                const base64Data = moviesPosterResponse.data;\n                this.poster = base64Data\n                this.posterUrl = `data:image/jpeg;base64,${base64Data}`;\n            }\n            catch (error) {\n                console.error(error)\n            }\n        }\n    },\n    components: {\n        'admin-header': AdminHeader\n    }\n}\n</script>\n\n\n<style scoped>\n.col {\n    /* border: 1px solid black; */\n    margin: 0;\n    padding: 0;\n}\n\nbutton {\n    background-color: rgb(165, 165, 231);\n    border: 0;\n    color: white;\n    width: 50px;\n    height: 50px;\n    font-size: 25px;\n    text-align: center;\n    border-radius: 2rem;\n}\n\nbutton:hover {\n    background-color: rgb(126, 126, 230);\n}\n\ntable {\n    border: 1px solid black;\n    border-collapse: collapse;\n    text-align: center;\n    border-radius: .5em;\n    margin-top: 10px;\n}\n\nth {\n    background-color: rgb(128, 128, 235);\n    color: white;\n}\n\ntd,\nth {\n    padding-left: 12.5px;\n    padding-right: 12.5px;\n    /* border: 1px solid black; */\n    font-size: small;\n}\n\ntd {\n    font-size: 15px;\n}\n\ntr:nth-child(even) {\n    background-color: rgb(207, 231, 243);\n}\n\ntr:nth-child(odd) {\n    background-color: whitesmoke;\n}\n</style>"],"mappings":";AAmFA,OAAAA,KAAA;AAGA,OAAAC,WAAA;AAEA,OAAAC,kBAAA;AAEA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,UAAA;MACAC,QAAA;MACAC,SAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,SAAA,IACA,KAAAC,cAAA;EACA;EACAC,OAAA;IACA,MAAAF,UAAA;MACA;QACA,IAAAG,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAf,KAAA,CAAAgB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QAEA,MAAAM,cAAA,SAAAnB,KAAA,CAAAoB,GAAA;QACA,KAAAhB,MAAA,GAAAe,cAAA,CAAAhB,IAAA;QACA,SAAAC,MAAA,CAAAiB,MAAA;UACAC,OAAA,CAAAC,GAAA;UACA,KAAAlB,UAAA;UACA;YAEA,SAAAmB,KAAA,SAAApB,MAAA;cACA,IAAAS,YAAA,GAAAC,YAAA,CAAAC,OAAA;cAEAf,KAAA,CAAAgB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;cACA,MAAAY,oBAAA,SAAAzB,KAAA,CAAAoB,GAAA,2CAAAI,KAAA,CAAAE,QAAA;;cAEA;cACA,MAAAC,UAAA,GAAAF,oBAAA,CAAAtB,IAAA;cACA,MAAAI,SAAA,6BAAAoB,UAAA;cACAH,KAAA,CAAAI,IAAA;gBAAA,oBAAArB;cAAA;cACA;YACA;UACA,EACA,OAAAsB,KAAA;YACAP,OAAA,CAAAC,GAAA;YACAD,OAAA,CAAAO,KAAA,CAAAA,KAAA;UACA;UACAP,OAAA,CAAAC,GAAA,MAAAnB,MAAA;QACA,OACA;UACAkB,OAAA,CAAAC,GAAA;UACA,KAAAjB,QAAA;QACA;MACA,EACA,OAAAuB,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAA7B,kBAAA;UACA,WAAAQ,SAAA;QACA,OAEA,IAAAmB,KAAA,CAAAC,QAAA;UACAR,OAAA,CAAAO,KAAA,CAAAA,KAAA;UACAG,KAAA;QACA;MACA;IACA;IACA,MAAAC,SAAAC,EAAA;MACA;QACA,IAAArB,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAf,KAAA,CAAAgB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QAEA,MAAAb,KAAA,CAAAmC,MAAA,oCAAAD,EAAA;QACAZ,OAAA,CAAAC,GAAA,qBAAAW,EAAA;QACA,WAAAxB,SAAA;MACA,EACA,OAAAmB,KAAA;QACAP,OAAA,CAAAO,KAAA,CAAAA,KAAA;QACAG,KAAA;MACA;IACA;IACA,MAAArB,eAAA;MACA;QACA,IAAAE,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAf,KAAA,CAAAgB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QACA,MAAAY,oBAAA,SAAAzB,KAAA,CAAAoB,GAAA;;QAEA;QACA,MAAAO,UAAA,GAAAF,oBAAA,CAAAtB,IAAA;QACA,KAAAK,MAAA,GAAAmB,UAAA;QACA,KAAApB,SAAA,6BAAAoB,UAAA;MACA,EACA,OAAAE,KAAA;QACAP,OAAA,CAAAO,KAAA,CAAAA,KAAA;MACA;IACA;EACA;EACAO,UAAA;IACA,gBAAAnC;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}