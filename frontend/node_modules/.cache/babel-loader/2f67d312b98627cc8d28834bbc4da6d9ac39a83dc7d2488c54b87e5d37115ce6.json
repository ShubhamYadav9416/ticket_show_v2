{"ast":null,"code":"import axios from 'axios';\nimport refreshAccessToken from '../../../utils/refreshToken';\nimport UserHeader from '@/components/UserHeader.vue';\nexport default {\n  name: 'UserBooking',\n  data() {\n    return {\n      data_recive: {}\n    };\n  },\n  created() {\n    this.userBookings();\n  },\n  methods: {\n    async userBookings() {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const theatersMoviebookingResponse = await axios.get(`http://127.0.0.1:8081/api/user/bookings`);\n        this.data_recive = theatersMoviebookingResponse.data;\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.userBookings();\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while fetching the movie data.');\n        }\n      }\n    }\n  },\n  components: {\n    'user-header': UserHeader\n  }\n};","map":{"version":3,"names":["axios","refreshAccessToken","UserHeader","name","data","data_recive","created","userBookings","methods","access_token","localStorage","getItem","defaults","headers","common","theatersMoviebookingResponse","get","error","response","status","console","alert","components"],"sources":["src/views/user/booked/UserBookig.vue"],"sourcesContent":["<template>\n    <div>\n        <user-header></user-header>\n        <div class=\"container text-center\">\n            <div class=\"row\">\n                <div class=\"col-3\">\n                    Column\n                </div>\n                <div class=\"col\" style=\"padding:50px 20px\">\n                    User id : {{ data_recive.user_id }}<br>\n                    User Mail : {{ data_recive.user_mail }}\n                    <br><br>\n                    <div class=\"card mb-3\" style=\"max-width: 540px;\" v-for=\"ticket in data_recive.tickets\" :key=\"ticket.id\">\n                        <div class=\"row g-0\">\n                            <div class=\"col-md-4\">\n                                <img src=\"#\" class=\"img-fluid rounded-start\" alt=\"...\">\n                            </div>\n                            <div class=\"col-md-8\">\n                                <div class=\"card-body\">\n                                    <h5 class=\"card-title\">{{ ticket.movie_name }}</h5>\n                                    <p style=\"color:rgb(103, 101, 101); margin-top:-10px; font-size:13px;\">{{ ticket.movie_tag }} | {{ ticket.movie_language }} | {{ ticket.movie_duration }}</p>\n                                    <i class=\"bi bi-pin-map-fill\" style=\"color:green;\"></i>{{ ticket.theater_name }}, {{ ticket.theater_place }}, {{ ticket.theater_location }}<br>\n                                    <p>Number of Ticket Booked: {{ ticket.no_of_tickets }}</p>\n                                    <p>Total Paid: Rs. {{ ticket.price }}</p>\n                                    <p class=\"card-text\"><small class=\"text-body-secondary\">Booking Id : {{ ticket.booking_id }}</small>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-3\">\n                    Column\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nimport refreshAccessToken from '../../../utils/refreshToken'\nimport UserHeader from '@/components/UserHeader.vue';\n\nexport default {\n    name: 'UserBooking',\n    data() {\n        return{\n            data_recive:{}\n        }\n    },\n    created() {\n        this.userBookings()\n    },\n    methods: {\n        async userBookings() {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                const theatersMoviebookingResponse = await axios.get(`http://127.0.0.1:8081/api/user/bookings`)\n                this.data_recive = theatersMoviebookingResponse.data \n            }\n            catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.userBookings()\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while fetching the movie data.')\n                }\n            }\n        }\n    },\n    components: {\n        'user-header': UserHeader,\n    },\n}\n\n</script>\n\n\n<style scoped>\n.col {\n    border: 1px solid black;\n}\n</style>"],"mappings":"AAwCA,OAAAA,KAAA;AAEA,OAAAC,kBAAA;AACA,OAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACA,MAAAD,aAAA;MACA;QACA,IAAAE,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAX,KAAA,CAAAY,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QACA,MAAAM,4BAAA,SAAAf,KAAA,CAAAgB,GAAA;QACA,KAAAX,WAAA,GAAAU,4BAAA,CAAAX,IAAA;MACA,EACA,OAAAa,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAAlB,kBAAA;UACA,WAAAM,YAAA;QACA,OAEA,IAAAU,KAAA,CAAAC,QAAA;UACAE,OAAA,CAAAH,KAAA,CAAAA,KAAA;UACAI,KAAA;QACA;MACA;IACA;EACA;EACAC,UAAA;IACA,eAAApB;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}