{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport refreshAccessToken from '@/utils/refreshToken';\nexport default {\n  name: 'userFilters',\n  props: {\n    theater_movies_for_filters: Array\n  },\n  data() {\n    return {\n      filtered_theaters: []\n    };\n  },\n  methods: {\n    async filter_by_rate(value) {\n      console.log(value);\n      for (let theater_movie of this.theater_movies_for_filters) {\n        try {\n          let access_token = localStorage.getItem('access_token');\n          axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n          const theatersRatingResponse = await axios.get(`http://127.0.0.1:8081/api/rating/theater/${theater_movie.theater_id}`);\n          if (theatersRatingResponse.data.votes === 0) {\n            continue;\n          } else {\n            const theater_cal_rating = theatersRatingResponse.data.total_rating / theatersRatingResponse.data.votes;\n            if (theater_cal_rating >= value && theater_cal_rating < value + 1) {\n              this.filtered_theaters.push(theater_movie);\n            }\n          }\n        } catch (error) {\n          if (error.response && error.response.status === 401) {\n            await refreshAccessToken();\n            await this.theaterRatings();\n          } else if (error.response) {\n            console.error(error);\n            alert('An error occurred while fetching the theater user rating data.');\n          }\n        }\n      }\n      this.$router.push({\n        name: 'search-result',\n        query: {\n          filtered_theaters\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","refreshAccessToken","name","props","theater_movies_for_filters","Array","data","filtered_theaters","methods","filter_by_rate","value","console","log","theater_movie","access_token","localStorage","getItem","defaults","headers","common","theatersRatingResponse","get","theater_id","votes","theater_cal_rating","total_rating","push","error","response","status","theaterRatings","alert","$router","query"],"sources":["src/views/user/home/Filters.vue"],"sourcesContent":["<template>\n    <div class=\"filters\">\n        <h3>Filters</h3>\n        <div class=\"filter_rating\">\n            <dt>Filter by rating</dt>\n            <dd @click=\"filter_by_rate(4)\"><i class=\"bi bi-star-fill\"></i><i class=\"bi bi-star-fill\"></i><i\n                    class=\"bi bi-star-fill\"></i><i class=\"bi bi-star-fill\"></i><i class=\"bi bi-star\"></i>\n            </dd>\n            <dd @click=\"filter_by_rate(4)\"><i class=\"bi bi-star-fill\"></i><i class=\"bi bi-star-fill\"></i><i\n                    class=\"bi bi-star-fill\"></i><i class=\"bi bi-star\"></i><i class=\"bi bi-star\"></i></dd>\n            <dd @click=\"filter_by_rate(4)\"><i class=\"bi bi-star-fill\"></i><i class=\"bi bi-star-fill\"></i><i\n                    class=\"bi bi-star\"></i><i class=\"bi bi-star\"></i><i class=\"bi bi-star\"></i></dd>\n            <dd @click=\"filter_by_rate(4)\"><i class=\"bi bi-star-fill\"></i><i class=\"bi bi-star\"></i><i\n                    class=\"bi bi-star\"></i><i class=\"bi bi-star\"></i><i class=\"bi bi-star\"></i></dd>\n        </div>\n        <div class=\"filter_tags\">\n            <dt>Filter by Tags</dt>\n            <dd>Action</dd>\n            <dd>Romance</dd>\n            {{ theater_movies_for_filters }}\n            {{ theater_movies }}\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport axios from 'axios';\nimport refreshAccessToken from '@/utils/refreshToken';\n\n\nexport default {\n    name: 'userFilters',\n    props: {\n        theater_movies_for_filters: Array,\n    },\n    data() {\n        return {\n            filtered_theaters: [],\n        }\n    },\n    methods: {\n        async filter_by_rate(value) {\n            console.log(value)\n            for (let theater_movie of this.theater_movies_for_filters) {\n                try {\n                    let access_token = localStorage.getItem('access_token')\n\n                    axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                    const theatersRatingResponse = await axios.get(`http://127.0.0.1:8081/api/rating/theater/${theater_movie.theater_id}`)\n\n                    if (theatersRatingResponse.data.votes === 0) {\n                        continue\n                    }\n                    else {\n                        const theater_cal_rating = theatersRatingResponse.data.total_rating / theatersRatingResponse.data.votes\n                        if (theater_cal_rating >= value && theater_cal_rating < value + 1) {\n                            this.filtered_theaters.push(theater_movie)\n                        }\n                    }\n                }\n                catch (error) {\n                    if (error.response && error.response.status === 401) {\n                        await refreshAccessToken()\n                        await this.theaterRatings()\n                    }\n\n                    else if (error.response) {\n                        console.error(error)\n                        alert('An error occurred while fetching the theater user rating data.')\n                    }\n                }\n            }\n            this.$router.push({\n                    name: 'search-result',\n                    query : {\n                        filtered_theaters\n                    }\n                })\n\n        }\n    }\n}\n\n</script>\n\n<style scoped>\n.filters {\n    margin-top: 150px;\n}\n\n.filters h3 {\n    font-size: 20px;\n}\n\n.filters dt {\n    font-size: 15px;\n    font-weight: 300;\n}\n\n.filters dd {\n    color: rgb(232, 129, 129);\n    margin-bottom: -5px;\n}\n\n.filter_tags {\n    margin-top: 15px;\n}\n\n.filter_tags dd {\n    color: rgb(54, 52, 52);\n    font-weight: 300;\n    font-size: 14px;\n}\n\n.filter_tags dd:hover {\n    color: black;\n    font-size: 16px;\n}\n\n.filter_rating dd:hover {\n    color: red;\n    font-size: 18px;\n}\n</style>"],"mappings":";AA2BA,OAAAA,KAAA;AACA,OAAAC,kBAAA;AAGA;EACAC,IAAA;EACAC,KAAA;IACAC,0BAAA,EAAAC;EACA;EACAC,KAAA;IACA;MACAC,iBAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,eAAAC,KAAA;MACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA,SAAAG,aAAA,SAAAT,0BAAA;QACA;UACA,IAAAU,YAAA,GAAAC,YAAA,CAAAC,OAAA;UAEAhB,KAAA,CAAAiB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;UACA,MAAAM,sBAAA,SAAApB,KAAA,CAAAqB,GAAA,6CAAAR,aAAA,CAAAS,UAAA;UAEA,IAAAF,sBAAA,CAAAd,IAAA,CAAAiB,KAAA;YACA;UACA,OACA;YACA,MAAAC,kBAAA,GAAAJ,sBAAA,CAAAd,IAAA,CAAAmB,YAAA,GAAAL,sBAAA,CAAAd,IAAA,CAAAiB,KAAA;YACA,IAAAC,kBAAA,IAAAd,KAAA,IAAAc,kBAAA,GAAAd,KAAA;cACA,KAAAH,iBAAA,CAAAmB,IAAA,CAAAb,aAAA;YACA;UACA;QACA,EACA,OAAAc,KAAA;UACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;YACA,MAAA5B,kBAAA;YACA,WAAA6B,cAAA;UACA,OAEA,IAAAH,KAAA,CAAAC,QAAA;YACAjB,OAAA,CAAAgB,KAAA,CAAAA,KAAA;YACAI,KAAA;UACA;QACA;MACA;MACA,KAAAC,OAAA,CAAAN,IAAA;QACAxB,IAAA;QACA+B,KAAA;UACA1B;QACA;MACA;IAEA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}