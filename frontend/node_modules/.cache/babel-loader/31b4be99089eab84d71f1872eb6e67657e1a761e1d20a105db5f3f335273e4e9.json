{"ast":null,"code":"import axios from 'axios';\nimport AdminHeader from '../../../components/AdminHeader';\nimport refreshAccessToken from '../../../utils/refreshToken';\nexport default {\n  data() {\n    return {\n      movies: {}\n    };\n  },\n  created() {\n    this.allMovies();\n  },\n  methods: {\n    async allMovies() {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer' + access_token;\n        const moviesResponse = await axios.get('http://127.0.0.1:8081/api/movie');\n        this.movies = moviesResponse.data;\n        console.log(\"Movie data fletch\");\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.allMovies();\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while fetching the followers data.');\n        }\n      }\n    }\n  },\n  components: {\n    'admin-header': AdminHeader\n  }\n};","map":{"version":3,"names":["axios","AdminHeader","refreshAccessToken","data","movies","created","allMovies","methods","access_token","localStorage","getItem","defaults","headers","common","moviesResponse","get","console","log","error","response","status","alert","components"],"sources":["src/views/admin/movies/MovieView.vue"],"sourcesContent":["<template>\n    <div id=\"outer_div\">\n        <admin-header></admin-header>\n        <div class=\"container-fluid text-center\">\n            <div class=\"row\">\n                <div class=\"col-2\"></div>\n                <div class=\"col\">\n                    <table>\n                        <tr>\n                            <th>Movie Id</th>\n                            <th>Movie Name</th>\n                            <th>Movie Tag</th>\n                            <th>Movie Language</th>\n                            <th>Movie Duration</th>\n                            <th>Movie Description</th>\n                            <th>Movie Poster</th>\n                            <th>Actions</th>\n                        </tr>\n                        <tr v-for=\"movie in movies\" :key=\"movie.movie_id\">\n                            <td>{{ movie.id }}</td>\n                            <td>{{ movie.movie_name }}</td>\n                            <td>{{ movie.movie_tag }}</td>\n                            <td>{{ movie.movie_language }}</td>\n                            <td>{{ movie.movie_duration }}</td>\n                            <td>{{ movie.movie_description }} ...</td>\n                            <td><a :href=\"movie.movie_image_path\">view</a></td>\n                            <td><a href=\"#\"><i class=\"bi bi-trash-fill\" style=\"color: brown;\"></i></a>/<a href=\"#\"><i class=\"bi bi-pencil-square\" style=\"color: grey;\"></i></a></td>\n                        </tr>\n                    </table>\n                </div>\n                <div class=\"col-2\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n\n<script>\n\nimport axios from 'axios';\nimport AdminHeader from '../../../components/AdminHeader'\n\nimport refreshAccessToken from '../../../utils/refreshToken'\n\nexport default {\n    data() {\n        return {\n            movies: {}\n        }\n    },\n    created(){\n        this.allMovies()\n    },\n    methods: {\n        async allMovies() {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer' + access_token\n\n                const moviesResponse = await axios.get('http://127.0.0.1:8081/api/movie')\n\n                this.movies = moviesResponse.data\n                console.log(\"Movie data fletch\")\n            }\n            catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.allMovies()\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while fetching the followers data.')\n                }\n            }\n        },\n    },\n    components: {\n        'admin-header': AdminHeader\n    }\n}\n</script>\n\n\n<style scoped>\n.col {\n    border: 1px solid black;\n    margin: 0;\n    padding: 0;\n}\n\ntable {\n\tborder: 1px solid black; \n\tborder-collapse: collapse; \n\ttext-align: center;\t\n    border-radius: .5em;\n    margin-top: 10px;\n}\n\nth{\n    background-color: darkblue;\n    color: white;\n}\ntd, th {\n    padding-left: 12.5px;\n    padding-right: 12.5px;\n\t/* border: 1px solid black; */\n}\n\ntd{\n    font-size: 15px;\n}\n\ntr:nth-child(even){\n    background-color: rgb(131, 202, 237);\n}\ntr:nth-child(odd){\n    background-color: whitesmoke;\n}\n</style>"],"mappings":"AAwCA,OAAAA,KAAA;AACA,OAAAC,WAAA;AAEA,OAAAC,kBAAA;AAEA;EACAC,KAAA;IACA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,OAAA;IACA,MAAAD,UAAA;MACA;QACA,IAAAE,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAV,KAAA,CAAAW,QAAA,CAAAC,OAAA,CAAAC,MAAA,+BAAAL,YAAA;QAEA,MAAAM,cAAA,SAAAd,KAAA,CAAAe,GAAA;QAEA,KAAAX,MAAA,GAAAU,cAAA,CAAAX,IAAA;QACAa,OAAA,CAAAC,GAAA;MACA,EACA,OAAAC,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAAlB,kBAAA;UACA,WAAAI,SAAA;QACA,OAEA,IAAAY,KAAA,CAAAC,QAAA;UACAH,OAAA,CAAAE,KAAA,CAAAA,KAAA;UACAG,KAAA;QACA;MACA;IACA;EACA;EACAC,UAAA;IACA,gBAAArB;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}