{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport refreshAccessToken from '@/utils/refreshToken';\nexport default {\n  name: 'userSearch',\n  data() {\n    return {\n      search_input: \"\",\n      str: \"hello\",\n      movie_filters: [],\n      theater_filters: [],\n      place_filters: []\n    };\n  },\n  created() {\n    this.allFilters();\n  },\n  methods: {\n    async allFilters() {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const allFiltersResponse = await axios.get(`http://127.0.0.1:8081/api/search/filters`);\n        console.log(allFiltersResponse);\n        this.movie_filters = allFiltersResponse.data.movie;\n        this.theater_filters = allFiltersResponse.data.theater;\n        this.place_filters = allFiltersResponse.data.place;\n        console.log(this.movie_filters);\n        console.log(this.theater_filterfilter_by_movies);\n        console.log(this.place_filters);\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.allFilters();\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while fetching filters');\n        }\n      }\n    },\n    async filter_by_movie(id) {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const allTheaterMovieResponse = await axios.get(`http://127.0.0.1:8081/api/search/movie/${id}`);\n        console.log(allTheaterMovieResponse);\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.filter_by_movie(id);\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while searching movie');\n        }\n      }\n    },\n    async filter_by_theater(id) {\n      try {\n        let access_token = localStorage.getItem('access_token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        const allTheaterMovieResponse = await axios.get(`http://127.0.0.1:8081/api/search/theater/${id}`);\n        console.log(allTheaterMovieResponse);\n        this.$router.push({\n          name: 'search-result',\n          query: {\n            allTheaterMovieResponse\n          }\n        });\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          await refreshAccessToken();\n          await this.filter_by_theater(id);\n        } else if (error.response) {\n          console.error(error);\n          alert('An error occurred while searching theater');\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","refreshAccessToken","name","data","search_input","str","movie_filters","theater_filters","place_filters","created","allFilters","methods","access_token","localStorage","getItem","defaults","headers","common","allFiltersResponse","get","console","log","movie","theater","place","theater_filterfilter_by_movies","error","response","status","alert","filter_by_movie","id","allTheaterMovieResponse","filter_by_theater","$router","push","query"],"sources":["src/views/user/search/Search.vue"],"sourcesContent":["<template>\n    <div class=\"container text-center\">\n        <div class=\"row\">\n            <div class=\"col-2\">\n                <router-link to=\"/home\">Return to Home Page</router-link>\n            </div>\n            <div class=\"col\">\n                <form class=\"d-flex\" role=\"search\">\n                    <input class=\"form-control me-2\" type=\"search\" placeholder=\"Search for Movie, Theater, place...\"\n                        v-model=search_input aria-label=\"Search\">\n                </form>\n                <h5 style=\"margin: 10px;\" v-show=\"search_input\">Results</h5>\n                <div>\n                    <div class=\"list-group\" v-show=\"search_input\">\n                        <a href=\"#\" @click=\"filter_by_movie(movie_filter.movie_id)\"\n                            class=\"list-group-item list-group-item-action\" style=\"padding-bottom: 0px;\"\n                            v-for=\"movie_filter in movie_filters\" :key=\"movie_filter.id\"\n                            v-show=\"movie_filter.movie_name.includes(search_input)\">\n                            <p align=\"left\" style=\"position: fixed; margin-left: 100px;\"><i class=\"bi bi-film\"></i></p>{{\n                                movie_filter.movie_name }}\n                        </a>\n                        <a href=\"#\" @click=\"filter_by_theater(theater_filter.theater_id)\"\n                            class=\"list-group-item list-group-item-action\" style=\"padding-bottom: 0px;\"\n                            v-for=\"theater_filter in theater_filters\" :key=\"theater_filter.id\"\n                            v-show=\"theater_filter.theater_name.includes(search_input)\">\n                            <p align=\"left\" style=\"position: fixed; margin-left: 100px;\"><i class=\"bi bi-building\"></i></p>\n                            {{ theater_filter.theater_name }}\n                        </a>\n                        <a href=\"#\" @click=\"filter_by_theater(place_filter.theater_id)\"\n                            class=\"list-group-item list-group-item-action\" style=\"padding-bottom: 0px;\"\n                            v-for=\"place_filter in place_filters\" :key=\"place_filter.id\"\n                            v-show=\"place_filter.theater_place.includes(search_input)\">\n                            <p align=\"left\" style=\"position: fixed; margin-left: 100px;\"><i class=\"bi bi-geo-alt\"></i></p>{{\n                                place_filter.theater_place }}\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-2\">\n\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\n\nimport axios from 'axios'\nimport refreshAccessToken from '@/utils/refreshToken'\n\nexport default {\n    name: 'userSearch',\n    data() {\n        return {\n            search_input: \"\",\n            str: \"hello\",\n            movie_filters: [],\n            theater_filters: [],\n            place_filters: []\n        }\n    },\n    created() {\n        this.allFilters()\n    },\n    methods: {\n        async allFilters() {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                const allFiltersResponse = await axios.get(`http://127.0.0.1:8081/api/search/filters`)\n                console.log(allFiltersResponse)\n                this.movie_filters = allFiltersResponse.data.movie\n                this.theater_filters = allFiltersResponse.data.theater\n                this.place_filters = allFiltersResponse.data.place\n                console.log(this.movie_filters)\n                console.log(this.theater_filterfilter_by_movies)\n                console.log(this.place_filters)\n            }\n            catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.allFilters()\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while fetching filters')\n                }\n            }\n        },\n        async filter_by_movie(id) {\n\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                const allTheaterMovieResponse = await axios.get(`http://127.0.0.1:8081/api/search/movie/${id}`)\n                console.log(allTheaterMovieResponse)\n            }\n            catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.filter_by_movie(id)\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while searching movie')\n                }\n            }\n        },\n        async filter_by_theater(id) {\n            try {\n                let access_token = localStorage.getItem('access_token')\n\n                axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\n                const allTheaterMovieResponse = await axios.get(`http://127.0.0.1:8081/api/search/theater/${id}`)\n                console.log(allTheaterMovieResponse)\n                this.$router.push({\n                    name: 'search-result',\n                    query : {\n                        allTheaterMovieResponse\n                    }\n                })\n            }\n            catch (error) {\n                if (error.response && error.response.status === 401) {\n                    await refreshAccessToken()\n                    await this.filter_by_theater(id)\n                }\n\n                else if (error.response) {\n                    console.error(error)\n                    alert('An error occurred while searching theater')\n                }\n            }\n        }\n    }\n}\n\n\n</script>\n\n\n<style scoped>\n.col {\n    border: 1px solid black;\n    margin-top: 50px;\n    padding: 20px;\n}\n</style>"],"mappings":";AAgDA,OAAAA,KAAA;AACA,OAAAC,kBAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,YAAA;MACAC,GAAA;MACAC,aAAA;MACAC,eAAA;MACAC,aAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACA,MAAAD,WAAA;MACA;QACA,IAAAE,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAd,KAAA,CAAAe,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QACA,MAAAM,kBAAA,SAAAlB,KAAA,CAAAmB,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAH,kBAAA;QACA,KAAAZ,aAAA,GAAAY,kBAAA,CAAAf,IAAA,CAAAmB,KAAA;QACA,KAAAf,eAAA,GAAAW,kBAAA,CAAAf,IAAA,CAAAoB,OAAA;QACA,KAAAf,aAAA,GAAAU,kBAAA,CAAAf,IAAA,CAAAqB,KAAA;QACAJ,OAAA,CAAAC,GAAA,MAAAf,aAAA;QACAc,OAAA,CAAAC,GAAA,MAAAI,8BAAA;QACAL,OAAA,CAAAC,GAAA,MAAAb,aAAA;MACA,EACA,OAAAkB,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAA3B,kBAAA;UACA,WAAAS,UAAA;QACA,OAEA,IAAAgB,KAAA,CAAAC,QAAA;UACAP,OAAA,CAAAM,KAAA,CAAAA,KAAA;UACAG,KAAA;QACA;MACA;IACA;IACA,MAAAC,gBAAAC,EAAA;MAEA;QACA,IAAAnB,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAd,KAAA,CAAAe,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QACA,MAAAoB,uBAAA,SAAAhC,KAAA,CAAAmB,GAAA,2CAAAY,EAAA;QACAX,OAAA,CAAAC,GAAA,CAAAW,uBAAA;MACA,EACA,OAAAN,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAA3B,kBAAA;UACA,WAAA6B,eAAA,CAAAC,EAAA;QACA,OAEA,IAAAL,KAAA,CAAAC,QAAA;UACAP,OAAA,CAAAM,KAAA,CAAAA,KAAA;UACAG,KAAA;QACA;MACA;IACA;IACA,MAAAI,kBAAAF,EAAA;MACA;QACA,IAAAnB,YAAA,GAAAC,YAAA,CAAAC,OAAA;QAEAd,KAAA,CAAAe,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAL,YAAA;QACA,MAAAoB,uBAAA,SAAAhC,KAAA,CAAAmB,GAAA,6CAAAY,EAAA;QACAX,OAAA,CAAAC,GAAA,CAAAW,uBAAA;QACA,KAAAE,OAAA,CAAAC,IAAA;UACAjC,IAAA;UACAkC,KAAA;YACAJ;UACA;QACA;MACA,EACA,OAAAN,KAAA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA,MAAA3B,kBAAA;UACA,WAAAgC,iBAAA,CAAAF,EAAA;QACA,OAEA,IAAAL,KAAA,CAAAC,QAAA;UACAP,OAAA,CAAAM,KAAA,CAAAA,KAAA;UACAG,KAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}